{% extends "base.jinja" %}

{% block nav %}
{% include 'content-nav.jinja' %}
{% endblock %}

{% block main %}
<div class="tasks">
    <div class="page-header tasks">
        <h1>Tasks</h1>
    </div>
    <div class="page-toolbar tasks">
        <button class="primary"><img src="/static/img/reload-outline.svg"></button>
        <button class="secondary">Queue Scan</button>
    </div>
    <div class="page-surface tasks">
        {% for task in tasks %}
        <div class="task-card">
            <div class="task-description">
                <h2>{{task.name}}</h2>
            </div>
            <div class="task-options">
                <div id="status-{{task.id}}" class="project-status ellipsis">
                    {{task.status.value}}
                </div>
                <button class="image small" aria-label="Run OCR for {{task.name}}" hx-post="{{ocr_url}}?id={{task.id}}"
                    hx-trigger="click" hx-swap="innerHTML swap:{{config.swap_delay}}ms" hx-target="#status-{{task.id}}"
                    hx-indicator="#status-{{task.id}}" hx-request='{"timeout": {{config.timeout}}}'>
                    <img alt="OCR Icon" src="/static/img/text-outline.svg" draggable="false">
                </button>
                <button class="image small" aria-label="View task {{task.name}}"
                    hx-get="{{url_for('label_page')}}?id={{task.id}}" hx-trigger="click"
                    hx-swap="outerHTML swap:{{config.swap_delay}}ms" hx-target="#main" hx-select="#main"
                    hx-push-url="true" hx-indicator="#main" hx-request='{"timeout": {{config.timeout}}}'>
                    <img alt="View Task Icon" src="/static/img/arrow-forward-outline.svg" draggable="false">
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}