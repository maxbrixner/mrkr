{% extends "base.jinja" %}

{% block header %}
&nbsp;
{% endblock %}


{% block nav %}
<div class="header">
    <span>mrkr</span>
    <button id="toggle-nav-button">
        <img src="/static/img/chevron-forward-outline.svg" alt="Back">
    </button>
</div>
<div class="button-container">
    <button aria-label="Home" hx-get="{{url_for('projects_page')}}" hx-trigger="click"
        hx-swap="innerHTML swap:{{config.swap_delay}}ms" hx-target="body" hx-push-url="true" hx-indicator="body"
        hx-request='{"timeout": {{config.timeout}}}'>
        <img src="/static/img/home-outline.svg" alt="Home Icon">
        <span>Home</span>
    </button>
</div>
<div class="button-container expandable">
    <button aria-label="Create Project">
        <img src="/static/img/create-outline.svg" alt="Create Icon">
        <span>Create</span>
        <img class="chevron" src="/static/img/chevron-down-outline.svg" alt="Back">
    </button>
    <div class="expandable-content-container">
        <div class="expandable-content">
            Hallo<br>Hallo
        </div>
    </div>
</div>
<div class="button-container">
    <button aria-label="Logout" hx-post="{{url_for('logout')}}" hx-trigger="click"
        hx-swap="innerHTML swap:{{config.swap_delay}}ms" hx-target="body" hx-push-url="true" hx-indicator="body"
        hx-request='{"timeout": {{config.timeout}}}'>
        <img src="/static/img/log-out-outline.svg" alt="Logout Icon">
        <span>Logout</span>
    </button>
</div>
{% endblock %}

{% block main %}
{% for project in projects %}
<div class="project-card">
    <div class="project-description">
        <h2>{{project.name}}</h2>
        <p>{{project.description}}</p>
    </div>
    <div class="project-options">
        <div id="status-{{project.id}}" class="project-status ellipsis">
            {{project.status.value}}
        </div>
        <button class="image small" aria-label="Edit project's {{project.name}} settings"><img
                src="/static/img/settings-outline.svg"></button>
        <button class="image small" aria-label="Scan project {{project.name}}" hx-post="{{scan_url}}?id={{project.id}}"
            hx-trigger="click" hx-swap="innerHTML swap:{{swap_delay}}ms" hx-target="#status-{{project.id}}"
            hx-indicator="#status-{{project.id}}" hx-request='{"timeout": {{timeout}}}'>
            <img src="/static/img/scan-outline.svg">
        </button>
        <button class="image small" aria-label="View project {{project.name}}" hx-get="{{tasks_url}}?id={{project.id}}"
            hx-trigger="click" hx-swap="outerHTML swap:{{swap_delay}}ms" hx-target="#main" hx-select="#main"
            hx-push-url="true" hx-indicator="#dialog-content" hx-request='{"timeout": {{timeout}}}'>
            <img src="/static/img/arrow-forward-outline.svg">
        </button>
    </div>
</div>
{% endfor %}
{% endblock %}