{% extends "base.jinja" %}

{% block main %}
<main class="main-projects" id="main">
    {% for project in projects %}
    <div class="project-card">
        <div class="project-description">
            <h2>{{project.name}}</h2>
            <p>{{project.description}}</p>
        </div>
        <div class="project-options">
            <div id="status-{{project.id}}" class="project-status ellipsis">
                {{project.status.value}}
            </div>
            <button class="image small" aria-label="Edit project's {{project.name}} settings"><img
                    src="/static/img/settings-outline.svg"></button>
            <button class="image small" aria-label="Scan project {{project.name}}"
                hx-post="{{scan_url}}?id={{project.id}}" hx-trigger="click" hx-swap="innerHTML swap:{{swap_delay}}ms"
                hx-target="#status-{{project.id}}" hx-indicator="#status-{{project.id}}"
                hx-request='{"timeout": {{timeout}}}'>
                <img src="/static/img/scan-outline.svg">
            </button>
            <button class="image small" aria-label="View project {{project.name}}"
                hx-get="{{tasks_url}}?project_id={{project.id}}" hx-trigger="click"
                hx-swap="outerHTML swap:{{swap_delay}}ms" hx-target="#main" hx-select="#main" hx-push-url="true"
                hx-indicator="#dialog-content" hx-request='{"timeout": {{timeout}}}'>
                <img src="/static/img/arrow-forward-outline.svg">
            </button>
        </div>
    </div>
    {% endfor %}
</main>
{% endblock %}